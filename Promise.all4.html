<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Advance JS</title>
	<script>

		let promiseCall = function(returnData, message) {
			    return	function(resolve, reject){
					setTimeout(() => {
					console.log(`the ${message} promise has resolved`);
					resolve(returnData);
				}, returnData * 100);
				}
		};

		let p1 = new Promise(promiseCall(10,"first"));
		let p2 = new Promise(promiseCall(20,"second"));
		let p3 = new Promise(promiseCall(30,"third"));
		let p4 = new Promise(function(resolve, reject){
			reject("The 4th Promise has rejected");
		});

		var total = 0;
		Promise.all([p1,p2,p3,p4]).then((result) =>{

			for(var i in result) {total += result[i];}


			console.log(`Results: ${result}`);
			console.log(`Total: ${total}`);
		}).catch((error) =>{
			console.log(`Error: ${error}`);
		});


	</script>
</head>
<body>

</body>
</html>